<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping
    PUBLIC "-//Hibernate/Hibernate Mapping DTD//EN"
    "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">

<hibernate-mapping>
    <class name="org.sakaiproject.component.app.syllabus.SyllabusTemplateImpl" table="SAKAI_SYLLABUS_TEMPLATE" optimistic-lock="version">
        <!-- A 36 hex character is our surrogate key.  -->
        <id name="surrogateKey" type="long">
            <column name="id" not-null="true" length="19" />
            <generator class="native">
                <param name="sequence">SyllabusTemplateImpl_SEQ</param>
            </generator>
        </id>
        
        <version name="lockId" />   

        <property name="posId">
            <column name="posId" unique-key="uniqueSyllabus" length="255"
                not-null="true" index="syllabus_posId" />
        </property>
        
        <set name="syllabi" lazy="true" sort="natural"
             order-by="position_c asc" cascade="all-delete-orphan">
            <key column="surrogateKey"/>                        
            <one-to-many class="org.sakaiproject.component.app.syllabus.SyllabusTemplateImpl"/>            
        </set>                
        

    </class>

</hibernate-mapping>
